<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<title>My Account</title>
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
		integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
	<link th:href="@{/css/style.css}" rel="stylesheet" />
</head>

<body>
	<div th:replace="~{fragments/header.html}" />

	<div class="content">
		<div class="container mt-5">
			<div class="row justify-content-center">
				<div class="col-md-6">
					<div class="d-flex justify-content-center mb-5 align-items-center">
						<p class="mb-0 me-3">Voir la liste de mes contacts</p>
						<a class="btn btn-outline-primary" href="/contactList">Mes contacts</a>
					</div>
					<div class="card">
						<div class="card-header">
							<h2 class="text-center">Mon compte</h2>
						</div>
						<div class="card-body">
							<form th:object="${user}" method="post" action="/userAccount">

								<div th:if="${success}" class="alert alert-success">
									<p th:text="${success}"></p>
								</div>
								<div th:if="${error}" class="alert alert-danger">
									<p th:text="${error}"></p>
								</div>

								<div class="form-group mb-3">
									<label for="firstName">Prénom :</label>
									<input type="text" id="firstName" class="form-control" th:field="*{firstName}" />
									<small th:if="${#fields.hasErrors('firstName')}" class="text-danger"
										th:text="${#fields.errors('firstName')}"></small>
								</div>

								<div class="form-group mb-3">
									<label for="lastName">Nom :</label>
									<input type="text" id="lastName" class="form-control" th:field="*{lastName}" />
									<small th:if="${#fields.hasErrors('lastName')}" class="text-danger"
										th:text="${#fields.errors('lastName')}"></small>
								</div>

								<div class="form-group mb-3">
									<label for="billingAddress">Adresse :</label>
									<input type="text" id="billingAddress" class="form-control"
										th:field="*{billingAddress}" />
									<small th:if="${#fields.hasErrors('billingAddress')}" class="text-danger"
										th:text="${#fields.errors('billingAddress')}"></small>
								</div>

								<div class="form-group mb-3">
									<label for="bankAccountNumber">Numéros de compte bancaire :</label>
									<input type="text" id="bankAccountNumber" class="form-control"
										th:field="*{bankAccountNumber}" />
									<small th:if="${#fields.hasErrors('bankAccountNumber')}" class="text-danger"
										th:text="${#fields.errors('bankAccountNumber')}"></small>
								</div>

								<input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />

								<div class="text-center">
									<button type="submit" class="btn btn-primary btn-block">Modifier les
										informations</button>
								</div>
							</form>
						</div>
					</div>
					<div class="card">
						<div class="card-header">
							<h2 class="text-center">Mot de passe</h2>
						</div>
						<div class="card-body">
							<form th:object="${passwordDTO}" method="post" action="/userAccount/password">

								<input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />

								<div th:if="${#fields.hasErrors('oldPassword')}" class="alert alert-danger">
									<p th:text="${#fields.errors('oldPassword')}"></p>
								</div>

								<div th:if="${#fields.hasErrors('newPassword')}" class="alert alert-danger">
									<p th:text="${#fields.errors('newPassword')}"></p>
								</div>


								<div class="form-group mb-3">
									<label for="oldPassword">Ancien mot de passe :</label>
									<input type="password" id="oldPassword" class="form-control"
										th:field="*{oldPassword}" />
									<small th:if="${#fields.hasErrors('oldPassword')}" class="text-danger"
										th:text="${#fields.errors('oldPassword')}"></small>
								</div>

								<div class="form-group mb-3">
									<label for="newPassword">Nouveau mot de passe :</label>
									<input type="password" id="newPassword" class="form-control"
										th:field="*{newPassword}" />
									<small th:if="${#fields.hasErrors('newPassword')}" class="text-danger"
										th:text="${#fields.errors('newPassword')}"></small>
								</div>

								<div class="text-center">
									<button type="submit" class="btn btn-primary btn-block">Modifier le mot de
										passe</button>
								</div>

							</form>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>

	<div th:replace="~{fragments/footer.html}" />

	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
		integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
		crossorigin="anonymous"></script>
</body>